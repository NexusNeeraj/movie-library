(this["webpackJsonpmovie-library"]=this["webpackJsonpmovie-library"]||[]).push([[0],{10:function(e,t,o){e.exports={moviesListContainer:"MoviesList_moviesListContainer__2s1C1",searchContainer:"MoviesList_searchContainer__2aokP",searchInput:"MoviesList_searchInput__sFUSR",searchButton:"MoviesList_searchButton__23yfT",moviesContainer:"MoviesList_moviesContainer__1TZN0",movieCard:"MoviesList_movieCard__3nJgF",moviePoster:"MoviesList_moviePoster__Z4AK-",movieTitle:"MoviesList_movieTitle__CN2CG",movieYear:"MoviesList_movieYear__2ggcp",addButton:"MoviesList_addButton__3GLaD"}},14:function(e,t,o){e.exports={auth:"AuthForm_auth__2s33e",control:"AuthForm_control__26jMp",actions:"AuthForm_actions__1bWBc",toggle:"AuthForm_toggle__1Ei5A"}},16:function(e,t,o){e.exports={collectionContainer:"MovieCollection_collectionContainer__V4_uX",collectionList:"MovieCollection_collectionList__2QX7z",collectionItem:"MovieCollection_collectionItem__3bki2",collectionPoster:"MovieCollection_collectionPoster__2DQ2g"}},20:function(e,t,o){e.exports={form:"ProfileForm_form__1MgSq",control:"ProfileForm_control__2A3kj",action:"ProfileForm_action__3nghk"}},23:function(e,t,o){e.exports={header:"MainNavigation_header__3_VGt",logo:"MainNavigation_logo__1QS5x"}},27:function(e,t,o){e.exports={profile:"UserProfile_profile__28SlA"}},28:function(e,t,o){e.exports={starting:"StartingPageContent_starting__36k-Q"}},33:function(e,t,o){},46:function(e,t,o){"use strict";o.r(t);var c=o(25),s=o.n(c),n=o(12),i=(o(33),o(2)),r=o.n(i),a=o(8),l=o(1);const j=r.a.createContext({token:"",isLoggedIn:!1,login:e=>{},logout:()=>{}}),d=e=>{const t=localStorage.getItem("token"),[o,c]=Object(i.useState)(t),s={token:o,isLoggedIn:!!o,login:e=>{c(e),localStorage.setItem("token",e)},logout:()=>{c(null),localStorage.removeItem("token")}};return Object(l.jsx)(j.Provider,{value:s,children:e.children})};var h=j,b=o(23),u=o.n(b);var O=()=>{const e=Object(i.useContext)(h),t=e.isLoggedIn;return Object(l.jsxs)("header",{className:u.a.header,children:[Object(l.jsx)(n.b,{to:"/",children:Object(l.jsx)("div",{className:u.a.logo,children:"Movie App"})}),Object(l.jsx)("nav",{children:Object(l.jsxs)("ul",{children:[!t&&Object(l.jsx)("li",{children:Object(l.jsx)(n.b,{to:"/auth",children:"Login"})}),t&&Object(l.jsx)("li",{children:Object(l.jsx)(n.b,{to:"/collection",children:"Collection"})}),t&&Object(l.jsx)("li",{children:Object(l.jsx)(n.b,{to:"/profile",children:"Profile"})}),t&&Object(l.jsx)("li",{children:Object(l.jsx)("button",{onClick:()=>{e.logout()},children:"Logout"})})]})})]})};var m=e=>Object(l.jsxs)(i.Fragment,{children:[Object(l.jsx)(O,{}),Object(l.jsx)("main",{children:e.children})]}),x=o(20),v=o.n(x);var _=()=>{const e=Object(a.useHistory)(),t=Object(i.useRef)(),o=Object(i.useContext)(h);return Object(l.jsxs)("form",{className:v.a.form,onSubmit:c=>{c.preventDefault();const s=t.current.value;fetch("https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyA1l_ODO_JiNoEnRF6NSFe_ShKC_NlEPcM",{method:"POST",body:JSON.stringify({idToken:o.token,password:s,returnSecureToken:!1}),headers:{"Content-Type":"application/json"}}).then((t=>{e.replace("/")}))},children:[Object(l.jsxs)("div",{className:v.a.control,children:[Object(l.jsx)("label",{htmlFor:"new-password",children:"New Password"}),Object(l.jsx)("input",{type:"password",id:"new-password",minLength:"7",ref:t})]}),Object(l.jsx)("div",{className:v.a.action,children:Object(l.jsx)("button",{children:"Change Password"})})]})},g=o(27),p=o.n(g);var C=()=>Object(l.jsxs)("section",{className:p.a.profile,children:[Object(l.jsx)("h1",{children:"User Profile"}),Object(l.jsx)(_,{})]}),f=o(14),N=o.n(f);var S=()=>{const e=Object(a.useHistory)(),t=Object(i.useRef)(),o=Object(i.useRef)(),c=Object(i.useContext)(h),[s,n]=Object(i.useState)(!0),[r,j]=Object(i.useState)(!1);return Object(l.jsxs)("section",{className:N.a.auth,children:[Object(l.jsx)("h1",{children:s?"Login":"Sign Up"}),Object(l.jsxs)("form",{onSubmit:n=>{n.preventDefault();const i=t.current.value,r=o.current.value;let a;j(!0),a=s?"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyA1l_ODO_JiNoEnRF6NSFe_ShKC_NlEPcM":"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyA1l_ODO_JiNoEnRF6NSFe_ShKC_NlEPcM",fetch(a,{method:"POST",body:JSON.stringify({email:i,password:r,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}}).then((e=>(j(!1),e.ok?e.json():e.json().then((e=>{throw new Error("Authentication Failed!")}))))).then((t=>{c.login(t.idToken),e.replace("/")})).catch((e=>{alert(e.message)}))},children:[Object(l.jsxs)("div",{className:N.a.control,children:[Object(l.jsx)("label",{htmlFor:"email",children:"Your Email"}),Object(l.jsx)("input",{type:"email",id:"email",required:!0,ref:t})]}),Object(l.jsxs)("div",{className:N.a.control,children:[Object(l.jsx)("label",{htmlFor:"password",children:"Your Password"}),Object(l.jsx)("input",{type:"password",id:"password",required:!0,ref:o})]}),Object(l.jsxs)("div",{className:N.a.actions,children:[!r&&Object(l.jsx)("button",{children:s?"Login":"Create Account"}),r&&Object(l.jsx)("p",{children:"Sending request..."}),Object(l.jsx)("button",{type:"button",className:N.a.toggle,onClick:()=>{n((e=>!e))},children:s?"Create new account":"Login with existing account"})]})]})]})};var y=()=>Object(l.jsx)(S,{}),L=o(48),M=o(28),k=o.n(M);var P=()=>Object(l.jsxs)("section",{className:k.a.starting,children:[Object(l.jsx)("h4",{children:"Welcome to the Movie Library"}),Object(l.jsx)("p",{children:"Search for your favorite movies and see the details."})]});const w=r.a.createContext({collection:[],addToCollection:e=>{}}),I=e=>{let{children:t}=e;const[o,c]=Object(i.useState)([]);return Object(l.jsx)(w.Provider,{value:{collection:o,addToCollection:e=>{c((t=>t.some((t=>t.imdbID===e.imdbID))?t:[...t,e]))}},children:t})};var F=w,A=o(10),T=o.n(A);var R=e=>{let{movies:t,searchMovies:o,query:c,setQuery:s,noMoviesFound:n}=e;const{addToCollection:r}=Object(i.useContext)(F);return Object(l.jsxs)("div",{className:T.a.moviesListContainer,children:[Object(l.jsxs)("div",{className:T.a.searchContainer,children:[Object(l.jsx)("input",{type:"text",value:c,onChange:e=>s(e.target.value),placeholder:"Search for movies...",className:T.a.searchInput}),Object(l.jsx)("button",{onClick:o,className:T.a.searchButton,children:"Search"})]}),Object(l.jsx)("div",{className:T.a.moviesContainer,children:n?Object(l.jsx)("p",{style:{color:"black",fontSize:"1.5rem"},children:"No Movies Found."}):t.map((e=>Object(l.jsxs)("div",{className:T.a.movieCard,children:[Object(l.jsx)("h3",{className:T.a.movieTitle,children:e.Title}),Object(l.jsx)("p",{className:T.a.movieYear,children:e.Year}),"N/A"!==e.Poster&&Object(l.jsx)("img",{src:e.Poster,alt:e.Title,className:T.a.moviePoster}),Object(l.jsx)("button",{onClick:()=>r(e),className:T.a.addButton,children:"Add to Collection"})]},e.imdbID)))})]})};var D=e=>{const[t,o]=Object(i.useState)(""),[c,s]=Object(i.useState)([]),[n,r]=Object(i.useState)(!1),[a,j]=Object(i.useState)(!1);Object(i.useEffect)((()=>{d()}),[]);const d=async()=>{r(!0);try{const e=await L.a.get("http://www.omdbapi.com/?apikey=a8c159e&s=Batman");s(e.data.Search||[]),j(!e.data.Search||0===e.data.Search.length),r(!1)}catch(e){console.error("Error fetching data from OMDb API",e)}};return Object(l.jsxs)(i.Fragment,{children:[Object(l.jsx)(P,{}),!n&&Object(l.jsx)(R,{movies:c,searchMovies:async()=>{try{const e=await L.a.get("http://www.omdbapi.com/?apikey=a8c159e&s=".concat(t));"False"===e.data.Response?(j(!0),s([])):(j(!1),s(e.data.Search||[]))}catch(e){console.error("Error fetching data from OMDb API",e)}},query:t,setQuery:o,noMoviesFound:a}),n&&Object(l.jsx)("p",{style:{textAlign:"center",fontSize:"3rem"},children:"Loading..."})]})},E=o(16),B=o.n(E);var J=()=>{const{collection:e}=Object(i.useContext)(F);return Object(l.jsxs)("div",{className:B.a.collectionContainer,children:[Object(l.jsx)("h2",{children:"Your Movie Collection"}),0===e.length?Object(l.jsx)("p",{children:"No Movies in Collection."}):Object(l.jsx)("ul",{className:B.a.collectionList,children:e.map((e=>Object(l.jsxs)("li",{className:B.a.collectionItem,children:[Object(l.jsx)("h3",{children:e.Title}),Object(l.jsx)("p",{children:e.Year}),"N/A"!==e.Poster&&Object(l.jsx)("img",{src:e.Poster,alt:e.Title,className:B.a.collectionPoster})]},e.imdbID)))})]})};var Y=()=>Object(l.jsx)(J,{});var q=function(){const e=Object(i.useContext)(h);return Object(l.jsx)(I,{children:Object(l.jsx)(m,{children:Object(l.jsxs)(a.Switch,{children:[e.isLoggedIn&&Object(l.jsx)(a.Route,{path:"/",exact:!0,children:Object(l.jsx)(D,{})}),!e.isLoggedIn&&Object(l.jsx)(a.Route,{path:"/auth",children:Object(l.jsx)(y,{})}),Object(l.jsxs)(a.Route,{path:"/profile",children:[e.isLoggedIn&&Object(l.jsx)(C,{}),!e.isLoggedIn&&Object(l.jsx)(a.Redirect,{to:"/auth"})]}),e.isLoggedIn&&Object(l.jsx)(a.Route,{path:"/collection",children:Object(l.jsx)(Y,{})}),Object(l.jsx)(a.Route,{path:"*",children:Object(l.jsx)(a.Redirect,{to:"/auth"})})]})})})};s.a.render(Object(l.jsx)(d,{children:Object(l.jsx)(n.a,{children:Object(l.jsx)(q,{})})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.c93d8228.chunk.js.map